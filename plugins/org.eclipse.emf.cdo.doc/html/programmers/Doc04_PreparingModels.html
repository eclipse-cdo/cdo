<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>Preparing EMF Models (CDO Model Repository Documentation)</title>

<link rel="stylesheet" href="../book.css" charset="UTF-8" type="text/css">

<noscript></noscript>
<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Preparing EMF Models (CDO Model Repository Documentation)";
    }
}
</script>

<link rel="stylesheet" href="../editor.css" charset="UTF-8" type="text/css">

<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>

<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.min.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">

<script>
$(function() {
$( ".resizable" ).resizable({ handles:"s,e,se", autoHide:true });
});
</script>

<script type="text/javascript">
function maximize(id)
{
  e = document.getElementById('max_' + id);
  c1 = document.getElementById('editor_content_1_' + id);
  c2 = document.getElementById('editor_content_2_' + id);
  pv = document.getElementById('max_pv_' + id); // TreeFormatter
  if (e.className == 'max')
  {
    e.className = 'rst';
    e.setAttribute('title', 'Restore');
    c1.setAttribute('style_orig', c1.getAttribute('style'));
    c1.setAttribute('style', 'border:2px solid #99b4d1; border-top:none;');
    c2.setAttribute('style', 'padding:8px;');
    if (pv != null)
    {
      pv.setAttribute('width_orig', pv.getAttribute('width'));
      pv.setAttribute('width', '');
    }
  }
  else
  {
    e.className = 'max';
    e.setAttribute('title', 'Maximize');
    c1.setAttribute('style', c1.getAttribute('style_orig'));
    c1.setAttribute('style_orig', '');
    c2.setAttribute('style', 'padding:8px; overflow:scroll; width:100%; height:100%;');
    if (pv != null)
    {
      pv.setAttribute('width', pv.getAttribute('width_orig'));
      pv.setAttribute('width_orig', '');
    }
  }
}
</script>
</head>

<body bgcolor="white" onload="windowTitle();">
<!-- <div class="help_breadcrumbs breadcrumbs_top"><a href="../Overview.html" title="CDO Model Repository Documentation">CDO Model Repository Documentation</a> > <a href="index.html" title="Category in CDO Model Repository Documentation">Programmer's Guide</a></div> -->

<table border="0">
	<tr>
		<td width="100%"><h1>Preparing EMF Models</h1></td>
		<td align="right" valign="middle" nowrap><a href="Doc03_PreparingWorkspace.html" title="Backward to Preparing the Workspace"><img src="../../images/backward.png" border="0"></a>&nbsp;<a href="client/index.html" title="Forward to Developing Client Applications"><img src="../../images/forward.png" border="0"></a></td>
	</tr>
</table>
<p class="author">Author: Eike Stepper</p>
<p>
 <b>Table of Contents</b> <p>
<table border="0">
<tr><td>1&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_CreatingEcore" title="Chapter in CDO Model Repository Documentation">Creating an Ecore Model</a></td></tr>
<tr><td>2&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_UsingImporter" title="Chapter in CDO Model Repository Documentation">Using the CDO Model Importer</a></td></tr>
<tr><td>3&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_UsingMigrator" title="Chapter in CDO Model Repository Documentation">Using the CDO Model Migrator</a></td></tr>
<tr><td>4&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_MigratingManually" title="Chapter in CDO Model Repository Documentation">Migrating a GenModel Manually</a></td></tr>
<tr><td>5&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_GeneratingModel" title="Chapter in CDO Model Repository Documentation">Generating a Model</a></td></tr>
<tr><td>6&nbsp;</td><td class="te" colspan="3"><a href="Doc04_PreparingModels.html#Doc_ModifyingGeneratedCode" title="Chapter in CDO Model Repository Documentation">Modifying Generated Getters and Setters</a></td></tr>
</table>
</p>


<h2><a name="Doc_CreatingEcore"></a>1&nbsp;&nbsp;Creating an Ecore Model</h2>
<p>
 There's really not much to say about this step. The .ecore file for CDO models is the same as for pure EMF models.
 Use the Empty EMF Project New Wizard to create an initial project for your model:
 <p align="center"><img src="EmptyEMFProject.png">

 <p>
 Create an ordinary Ecore model file in the models folder.
 The model1 example model in the usual Ecore model editor looks like follows:
 <p align="center"><img src="Model1Ecore.png">

 <p>
 The XML representation of this Ecore model is:
 

<div class="snippet" style="margin-left:24px;" align="left">
  <a name="snippet_Doc_CreatingEcore_1"></a>
  <table border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td width="25px"><div style="position:relative;"><img src="../../images/editor-1.png"><img style="position:absolute; top:5px; left:5px;" src="../../images/formatter-xml.gif"></div></td>
      <td style="background-image:url(../../images/editor-2.png); background-repeat:repeat-x;" width="1px"><font face="Segoe UI,Arial" size="-1">company.ecore</font></td>
      <td width="1px"><img src="../../images/editor-3.png"></td>
      <td style="background-image:url(../../images/editor-4.png); background-repeat:repeat-x;" align="right"></td>
      <td style="background-image:url(../../images/editor-4.png); background-repeat:repeat-x;" align="center" width="16"><a href="javascript:maximize('Doc_CreatingEcore_1')" id="max_Doc_CreatingEcore_1" class="rst" title="Restore">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></td>
      <td width="6px"><img src="../../images/editor-5.png"></td>
    </tr>
    <tr>
      <td colspan="6" align="left" valign="top" style="border:1px solid #a0a0a0; border-top:none;" nowrap>
        <div id="editor_content_1_Doc_CreatingEcore_1" class="ui-widget-content resizable" style="border:2px solid #99b4d1; border-top:none;" style_orig="width:600px; height:300px; border:2px solid #99b4d1; border-top:none;">
          <div id="editor_content_2_Doc_CreatingEcore_1" style="padding:8px;">
<b><font color="#FF0000">C:\develop\cdo-master\git\cdo\org.eclipse.emf.cdo.examples.company\model\company.ecore (Das System kann den angegebenen Pfad nicht finden)</font></b>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>
<p>

 <p>
 The model project should look similar to this, now:
 <p align="center"><img src="Model1Project.png">


<h2><a name="Doc_UsingImporter"></a>2&nbsp;&nbsp;Using the CDO Model Importer</h2>
<p>
 The easiest way to create a CDO enabled GenModel is to use the CDO Migrator utility that is shipped with the CDO SDK.
 It includes a special Ecore Model Importer that adjusts all the GenModel properties needed to generated CDO native models.
 Right-click the Ecore model file and select New and Other... and choose the EMF Generator Model New Wizard:
 <p align="center"><img src="Migrator0.png">

 <p align="center"><img src="Migrator1.png">

 <p>
 On the next page, the Select a Model Importer page, select the Ecore model (CDO native) importer:
 <p align="center"><img src="Migrator2.png">

 <p>
 On the next page, the Ecore Import page, click the Load button:
 <p align="center"><img src="Migrator3.png">

 <p>
 On the next page, the Package Selection page, adjust the settings depending on your model and its referenced models:
 <p align="center"><img src="Migrator4.png">

 <p>
 After clicking the Finish button your model project should look similar to this (please note that the CDO marker
 file META-INF/CDO.MF has also been created by the importer):
 <p align="center"><img src="Migrator5.png">


<h2><a name="Doc_UsingMigrator"></a>3&nbsp;&nbsp;Using the CDO Model Migrator</h2>
<p>
 If you don't want to use the CDO Model Importer to automatically let a proper GenModel be created for you it
 is still rather easy to migrate an existing GenModel with the CDO Migrator:
 <p align="center"><img src="Migrator6.png">

 <p>
 In case the generator model was successfully migrated to CDO the following dialog box will appear:
 <p align="center"><img src="Migrator7.png">

 <p>
 Proceed with Generate The Model.

<h2><a name="Doc_MigratingManually"></a>4&nbsp;&nbsp;Migrating a GenModel Manually</h2>
<p>
 If you don't want to use the CDO Model Importer to automatically let a proper GenModel be created for you
 it is still rather easy to migrate an existing GenModel by hand.
 <p>
 The EMF generator model for your Ecore model is much like a usual GenModel except for the following four differences:
 <ul>
 <li> The <i>Feature Delegation</i> property <b>must be</b> set to <code>Reflective</code>
 <li> The <i>Model Plug-in Variables</i> property <b>should be</b> set to <code>CDO=org.eclipse.emf.cdo</code>
 <li> The <i>Root Extends Class</i> property <b>must be</b> set to <a href="../../javadoc/org/eclipse/emf/internal/cdo/CDOObjectImpl.html" title="Class in org.eclipse.emf.internal.cdo"><code>org.eclipse.emf.internal.cdo.CDOObjectImpl</code></a>
 <li> The <i>Root Extends Interface</i> property <b>can be</b> set to <a href="../../javadoc/org/eclipse/emf/cdo/CDOObject.html" title="Interface in org.eclipse.emf.cdo"><code>org.eclipse.emf.cdo.CDOObject</code></a>
 </ul>
 <p align="center"><img src="GenModel.png">

 <p>
 Note that you do not need to generate an editor if you want to use your model with the <a href="../users/Doc01_UserInterface.html" title="Article in CDO Model Repository Documentation">CDO User Interface</a>
 A dedicated <a href="../users/Doc07_UsingModels.html#Doc_EditingModelElementsEditor" title="Chapter in CDO Model Repository Documentation">model editor</a> is only needed if you plan to use your model with normal XML based files as well.
 Even in this scenario it could be simpler to use the EMF Reflective Model Editor though.
 <p>
 The XML representation of this GenModel is:
 

<div class="snippet" style="margin-left:24px;" align="left">
  <a name="snippet_Doc_MigratingManually_1"></a>
  <table border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td width="25px"><div style="position:relative;"><img src="../../images/editor-1.png"><img style="position:absolute; top:5px; left:5px;" src="../../images/formatter-xml.gif"></div></td>
      <td style="background-image:url(../../images/editor-2.png); background-repeat:repeat-x;" width="1px"><font face="Segoe UI,Arial" size="-1">company.genmodel</font></td>
      <td width="1px"><img src="../../images/editor-3.png"></td>
      <td style="background-image:url(../../images/editor-4.png); background-repeat:repeat-x;" align="right"></td>
      <td style="background-image:url(../../images/editor-4.png); background-repeat:repeat-x;" align="center" width="16"><a href="javascript:maximize('Doc_MigratingManually_1')" id="max_Doc_MigratingManually_1" class="rst" title="Restore">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></td>
      <td width="6px"><img src="../../images/editor-5.png"></td>
    </tr>
    <tr>
      <td colspan="6" align="left" valign="top" style="border:1px solid #a0a0a0; border-top:none;" nowrap>
        <div id="editor_content_1_Doc_MigratingManually_1" class="ui-widget-content resizable" style="border:2px solid #99b4d1; border-top:none;" style_orig="width:600px; height:300px; border:2px solid #99b4d1; border-top:none;">
          <div id="editor_content_2_Doc_MigratingManually_1" style="padding:8px;">
<b><font color="#FF0000">C:\develop\cdo-master\git\cdo\org.eclipse.emf.cdo.examples.company\model\company.genmodel (Das System kann den angegebenen Pfad nicht finden)</font></b>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>
<p>


<h2><a name="Doc_GeneratingModel"></a>5&nbsp;&nbsp;Generating a Model</h2>
<p>
 Generate the Java code for your model as you are used to do it:
 <p align="center"><img src="GenerateTheModel.png">

 <p>
 The result of the generation can look similar to this (some artifacts are hidden to remove noise from the Package Explorer):
 <p align="center"><img src="GeneratorResults.png">


<h2><a name="Doc_ModifyingGeneratedCode"></a>6&nbsp;&nbsp;Modifying Generated Getters and Setters</h2>
<p>
 If you want to modify the behavior of generated getters and setters (or have already done so in existing models)
 you might want to try <i>dynamic feature delegation</i> (introduced in EMF 2.5). With this pattern, the reflective methods like eGet still
 call your generated method like getX() and then that calls the dynamic reflective method like eDynamicGet. It effectively produces
 the same behavior as "Reflective" delegating but does so by delegating through your generated accessors allowing you to specialize
 those as you could when you used "None"...

<p align="right">
<a href="Doc03_PreparingWorkspace.html" title="Backward to Preparing the Workspace"><img src="../../images/backward.png" border="0"></a>&nbsp;<a href="client/index.html" title="Forward to Developing Client Applications"><img src="../../images/forward.png" border="0"></a></p>
<!-- <div class="help_breadcrumbs breadcrumbs_bottom"><a href="../Overview.html" title="CDO Model Repository Documentation">CDO Model Repository Documentation</a> > <a href="index.html" title="Category in CDO Model Repository Documentation">Programmer's Guide</a></div> -->

<div class="copyright">Copyright (c) 2004-2025 Eike Stepper (Loehne, Germany) and others.<br>All rights reserved. This program and the accompanying materials are made available under the terms of the Eclipse Public License v1.0 which accompanies this distribution, and is available at http://www.eclipse.org/legal/epl-v10.html</div>
</body>
</html>
